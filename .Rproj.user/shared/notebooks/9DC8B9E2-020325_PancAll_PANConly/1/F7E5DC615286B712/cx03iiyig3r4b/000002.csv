"0",""
"0","for (i in seq_along(dat)) {"
"0","  "
"0","  # Get all cancer age columns except AgePANC"
"0","  age_cols <- grep(""^Age[A-Z]"", colnames(dat[[i]]), value = TRUE)"
"0","  age_cols <- age_cols[age_cols != ""AgePANC""]  # exclude AgePANC"
"0","  "
"0","  # Find minimum age of any non-PANC cancer"
"0","  dat[[i]]$MinOtherCancerAge <- do.call(pmin, c(lapply(dat[[i]][age_cols], as.numeric), na.rm = TRUE))"
"0","  "
"0","  # Set isAff=1 only if pancreatic cancer was first or only cancer"
"0","  dat[[i]]$isAff <- ifelse(dat[[i]]$isAffPANC == 1 & "
"0","                          (is.na(dat[[i]]$MinOtherCancerAge) | "
"0","                           dat[[i]]$AgePANC <= dat[[i]]$MinOtherCancerAge), "
"0","                          1, 0)"
"0","  "
"0","   # Ensure no NAs in isAff (convert any NAs to 0)"
"0","  dat[[i]]$isAff[is.na(dat[[i]]$isAff)] <- 0"
"0","  "
"0","  # Clean up temporary column"
"0","  dat[[i]]$MinOtherCancerAge <- NULL"
"0","}"
"0",""
"0","for (i in seq_along(dat)) {"
"0","  if (""AgePANC"" %in% colnames(dat[[i]])) {"
"0","    colnames(dat[[i]])[colnames(dat[[i]]) == ""AgePANC""] <- ""Age"""
"0","  }"
"0","}"
"0",""
"0",""
"0","#Â Data Preperation in the right format"
"0","for (i in seq_along(dat)) {"
"0","  if (""PedigreeID"" %in% colnames(dat[[i]])) {"
"0","    colnames(dat[[i]])[colnames(dat[[i]]) == ""PedigreeID""] <- ""FamilyID"""
"0","  }"
"0","}"
"0","for (i in seq_along(dat)) {"
"0","  # Add a new column ""PedigreeID"" with the list number"
"0","  dat[[i]]$PedigreeID <- i"
"0","}"
"0",""
"0",""
"0","for (i in seq_along(dat)) {"
"0","  if (""Geno"" %in% colnames(dat[[i]])) {"
"0","    colnames(dat[[i]])[colnames(dat[[i]]) == ""Geno""] <- ""geno"""
"0","  }"
"0","}"
"0",""
"0","describeFamilies(dat)"
"0",""
