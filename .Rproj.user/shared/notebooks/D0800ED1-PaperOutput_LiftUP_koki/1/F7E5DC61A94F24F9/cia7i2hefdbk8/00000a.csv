"0",""
"0","# Calculate fold increases compared to SEER baseline"
"0","calculate_fold_increase <- function(risk_table, db_sim, cancer = ""Ovarian"", gene = ""SEER"", "
"0","                                   sex = ""Female"", race = ""All_Races"", type = ""Net"") {"
"0","  # Extract cumulative data from the Panelpro Database"
"0","  dim_names <- attr(db_sim$Penetrance, ""dimnames"")"
"0","  cancer_index <- which(dim_names[[1]] == cancer)"
"0","  gene_index <- which(dim_names[[2]] == gene)"
"0","  race_index <- which(dim_names[[3]] == race)"
"0","  sex_index <- which(dim_names[[4]] == sex)"
"0","  type_index <- which(dim_names[[6]] == type)"
"0","  "
"0","  density_data <- db_sim$Penetrance[cancer_index, gene_index, race_index, sex_index, , type_index]"
"0","  cumulative_density_panelpro <- cumsum(density_data)"
"0","  "
"0","  # For each age in risk_table, find the corresponding SEER risk"
"0","  fold_increases <- sapply(1:nrow(risk_table), function(i) {"
"0","    age <- risk_table$Age[i]"
"0","    palb2_risk <- risk_table$Mean_Risk[i]"
"0","    "
"0","    # Get SEER risk for this age"
"0","    if (age <= length(cumulative_density_panelpro)) {"
"0","      seer_risk <- cumulative_density_panelpro[age]"
"0","      fold_increase <- palb2_risk / seer_risk"
"0","      return(fold_increase)"
"0","    } else {"
"0","      return(NA)"
"0","    }"
"0","  })"
"0","  "
"0","  return(fold_increases)"
"0","}"
"0",""
"0","# Calculate fold increases"
"0","fold_increases_original <- calculate_fold_increase("
"0","  risk_table_original, "
"0","  PanelPRODatabase"
"0",")"
"0",""
"0","fold_increases_removed <- calculate_fold_increase("
"0","  risk_table_removed, "
"0","  PanelPRODatabase"
"0",")"
"0",""
"0","fold_increases_030125 <- calculate_fold_increase("
"0","  risk_table_030125, "
"0","  PanelPRODatabase"
"0",")"
"0",""
"0","# Add fold increases to comparative table"
"0","fold_increase_table <- data.frame("
"0","  Age = risk_table_original$Age,"
"0","  With_Probands = round(fold_increases_original, 1),"
"0","  Without_Probands = round(fold_increases_removed, 1),"
"0","  Data_030125 = round(fold_increases_030125, 1)"
"0",")"
"0",""
"0","cat(""\n\n## Fold Increase Over SEER Baseline\n"")"
"1","

## Fold Increase Over SEER Baseline
"
"0","print(knitr::kable("
"0","  fold_increase_table,"
"0","  col.names = c(""Age"", ""With Probands"", ""Without Probands"", ""Data 030125""),"
"0","  caption = ""Fold increase of PALB2 PGV carrier risk over SEER baseline by age"""
"0","))"
